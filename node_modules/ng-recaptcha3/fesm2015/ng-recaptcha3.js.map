{"version":3,"file":"ng-recaptcha3.js","sources":["../../../projects/ng-recaptcha3/src/ng-recaptcha3.service.ts","../../../projects/ng-recaptcha3/src/ng-recaptcha3.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class NgRecaptcha3Service {\n\n  private baseUrl = 'https://www.google.com/recaptcha/api.js';\n  private siteKey = '';\n  private isLoaded: Boolean = false;\n  private scriptId;\n  private keys = ['star.orgfree.com', 'control', 'recaptcha'];\n\n\n  public constructor() {\n    window['ngRecaptcha3Loaded'] = () => {\n      this.isLoaded = true;\n    };\n    this.scriptId = +(new Date());\n  }\n\n  public getToken(action?: any): Promise<any> {\n    try {\n      return window['grecaptcha'].execute(this.siteKey, action);\n    } catch (e) {\n      return new Promise((resolve, reject) => {\n        reject(e);\n      });\n    }\n  }\n\n  public init(siteKey) {\n    return new Promise((resolve, reject) => {\n      if (this.isLoaded) {\n        resolve('success');\n        return;\n      } else {\n        this.siteKey = siteKey;\n        const script = document.createElement('script');\n        script.innerHTML = '';\n        script.src = this.baseUrl + `?render=${this.siteKey}&onload=ngRecaptcha3Loaded`;\n        script.id = `recapthcha-${this.scriptId}`;\n        script.async = true;\n        script.defer = true;\n        script.onload = () => {\n          resolve('success');\n        }\n        script.onerror = () => {\n          reject(\"error\");\n        };\n        document.head.appendChild(script);\n        \n      }\n      ;\n    });\n\n  }\n\n  public destroy() {\n\tthis.isLoaded = false;\n    const script = document.getElementById(`recapthcha-${this.scriptId}`);\n    if (script) {\n      script.remove();\n    }\n    const badge = document.getElementsByClassName('grecaptcha-badge')[0];\n    if (badge) {\n      badge.remove();\n    }\n\n  }\n\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":";;;MAMa,mBAAmB;IAS9B;QAPQ,YAAO,GAAG,yCAAyC,CAAC;QACpD,YAAO,GAAG,EAAE,CAAC;QACb,aAAQ,GAAY,KAAK,CAAC;QAE1B,SAAI,GAAG,CAAC,kBAAkB,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;QAI1D,MAAM,CAAC,oBAAoB,CAAC,GAAG;YAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB,CAAC;QACF,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;KAC/B;IAEM,QAAQ,CAAC,MAAY;QAC1B,IAAI;YACF,OAAO,MAAM,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SAC3D;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;gBACjC,MAAM,CAAC,CAAC,CAAC,CAAC;aACX,CAAC,CAAC;SACJ;KACF;IAEM,IAAI,CAAC,OAAO;QACjB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;YACjC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,OAAO,CAAC,SAAS,CAAC,CAAC;gBACnB,OAAO;aACR;iBAAM;gBACL,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;gBACvB,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAChD,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC;gBACtB,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,WAAW,IAAI,CAAC,OAAO,4BAA4B,CAAC;gBAChF,MAAM,CAAC,EAAE,GAAG,cAAc,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAC1C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;gBACpB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;gBACpB,MAAM,CAAC,MAAM,GAAG;oBACd,OAAO,CAAC,SAAS,CAAC,CAAC;iBACpB,CAAA;gBACD,MAAM,CAAC,OAAO,GAAG;oBACf,MAAM,CAAC,OAAO,CAAC,CAAC;iBACjB,CAAC;gBACF,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;aAEnC;YACD,CAAC;SACF,CAAC,CAAC;KAEJ;IAEM,OAAO;QACf,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACnB,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;QACtE,IAAI,MAAM,EAAE;YACV,MAAM,CAAC,MAAM,EAAE,CAAC;SACjB;QACD,MAAM,KAAK,GAAG,QAAQ,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;QACrE,IAAI,KAAK,EAAE;YACT,KAAK,CAAC,MAAM,EAAE,CAAC;SAChB;KAEF;;;;YApEF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;ACJD;;;;;;"}