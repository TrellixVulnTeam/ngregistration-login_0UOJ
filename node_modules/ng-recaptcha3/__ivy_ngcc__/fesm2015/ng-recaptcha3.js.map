{"version":3,"file":"ng-recaptcha3.js","sources":["../../../projects/ng-recaptcha3/src/ng-recaptcha3.service.ts","../../../projects/ng-recaptcha3/src/ng-recaptcha3.ts"],"names":[],"mappings":";;;;MAMa,mBAAmB;AAEhC,IAOE;AAAiB,QAPT,YAAO,GAAG,yCAAyC,CAAC;AAC7D,QAAS,YAAO,GAAG,EAAE,CAAC;AACtB,QAAS,aAAQ,GAAY,KAAK,CAAC;AACnC,QACS,SAAI,GAAG,CAAC,kBAAkB,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;AAE9D,QAEI,MAAM,CAAC,oBAAoB,CAAC,GAAG;AAClC,YAAK,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC1B,SAAI,CAAC;AACL,QAAG,IAAI,CAAC,QAAQ,GAAG,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;AACjC,KAAE;AAEH,IAAS,QAAQ,CAAC,MAAY;AAAK,QAC/B,IAAI;AACP,YAAK,OAAO,MAAM,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/D,SAAI;AAAE,QAAD,OAAO,CAAC,EAAE;AACf,YAAK,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;AACxC,gBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;AACjB,aAAM,CAAC,CAAC;AACR,SAAI;AACJ,KAAE;AAEH,IAAS,IAAI,CAAC,OAAO;AACpB,QAAG,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM;AACtC,YAAK,IAAI,IAAI,CAAC,QAAQ,EAAE;AACxB,gBAAO,OAAO,CAAC,SAAS,CAAC,CAAC;AAC1B,gBAAO,OAAO;AACd,aAAM;AAAE,iBAAI;AACZ,gBAAO,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC9B,gBAAO,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;AACvD,gBAAO,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC;AAC7B,gBAAO,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,WAAW,IAAI,CAAC,OAAO,4BAA4B,CAAC;AACvF,gBAAO,MAAM,CAAC,EAAE,GAAG,cAAc,IAAI,CAAC,QAAQ,EAAE,CAAC;AACjD,gBAAO,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AAC3B,gBAAO,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AAC3B,gBAAO,MAAM,CAAC,MAAM,GAAG;AACvB,oBAAS,OAAO,CAAC,SAAS,CAAC,CAAC;AAC5B,iBAAQ,CAAA;AACR,gBAAO,MAAM,CAAC,OAAO,GAAG;AACxB,oBAAS,MAAM,CAAC,OAAO,CAAC,CAAC;AACzB,iBAAQ,CAAC;AACT,gBAAO,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACzC,aACM;AACN,YAAK,CAAC;AACN,SAAI,CAAC,CAAC;AAEP,KAAG;AAEH,IAAS,OAAO;AACf,QAAA,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,QAAG,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AACzE,QAAG,IAAI,MAAM,EAAE;AACf,YAAK,MAAM,CAAC,MAAM,EAAE,CAAC;AACrB,SAAI;AACJ,QAAG,MAAM,KAAK,GAAG,QAAQ,CAAC,sBAAsB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC;AACxE,QAAG,IAAI,KAAK,EAAE;AACd,YAAK,KAAK,CAAC,MAAM,EAAE,CAAC;AACpB,SAAI;AAEL,KAAG;AAEH;gHACA;AACA,6LApEK;AAAE;CAJN,UAAU,SAAC,mBACV,UAAU,EAAE,MAAM,eACnB;;;;;gDAIgB;AAAC;ACRlB;AACC;AACC;AAED;AAAC;AACE","sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class NgRecaptcha3Service {\n\n  private baseUrl = 'https://www.google.com/recaptcha/api.js';\n  private siteKey = '';\n  private isLoaded: Boolean = false;\n  private scriptId;\n  private keys = ['star.orgfree.com', 'control', 'recaptcha'];\n\n\n  public constructor() {\n    window['ngRecaptcha3Loaded'] = () => {\n      this.isLoaded = true;\n    };\n    this.scriptId = +(new Date());\n  }\n\n  public getToken(action?: any): Promise<any> {\n    try {\n      return window['grecaptcha'].execute(this.siteKey, action);\n    } catch (e) {\n      return new Promise((resolve, reject) => {\n        reject(e);\n      });\n    }\n  }\n\n  public init(siteKey) {\n    return new Promise((resolve, reject) => {\n      if (this.isLoaded) {\n        resolve('success');\n        return;\n      } else {\n        this.siteKey = siteKey;\n        const script = document.createElement('script');\n        script.innerHTML = '';\n        script.src = this.baseUrl + `?render=${this.siteKey}&onload=ngRecaptcha3Loaded`;\n        script.id = `recapthcha-${this.scriptId}`;\n        script.async = true;\n        script.defer = true;\n        script.onload = () => {\n          resolve('success');\n        }\n        script.onerror = () => {\n          reject(\"error\");\n        };\n        document.head.appendChild(script);\n        \n      }\n      ;\n    });\n\n  }\n\n  public destroy() {\n\tthis.isLoaded = false;\n    const script = document.getElementById(`recapthcha-${this.scriptId}`);\n    if (script) {\n      script.remove();\n    }\n    const badge = document.getElementsByClassName('grecaptcha-badge')[0];\n    if (badge) {\n      badge.remove();\n    }\n\n  }\n\n\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}